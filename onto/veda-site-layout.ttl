@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix v-fs: <http://semantic-machines.com/veda/veda-search/> .
@prefix v-s: <http://semantic-machines.com/veda/veda-schema/> .
@prefix v-ui: <http://semantic-machines.com/veda/veda-ui/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix d: <http://semantic-machines.com/veda/veda-data/> .
@prefix site: <http://semantic-machines.com/veda-site/> .

<http://semantic-machines.com/veda/veda-site-layout>
  rdf:type owl:Ontology ;
  rdfs:label "Сайт Veda. Макет"@ru ;
  rdfs:label "Veda site. Layout"@en ;
#  owl:versionInfo "1.3" ;
  v-s:loadPriority 10 ;
.

### STRINGS ###

site:Slogan
  rdf:type rdfs:Resource ;
  rdfs:label "/ Semantic machines /"@en ;
.

site:SemanticMachinesLogo
  a v-s:File;
  v-s:fileUri "semantic-machines-logo.svg"^^xsd:string ;
  v-s:fileName "semantic-machines-logo.svg"^^xsd:string;
  v-s:filePath "/site"^^xsd:string ;
.
site:SemanticMachinesLogoLong
  a v-s:File;
  v-s:fileUri "semantic-machines-logo-long.svg"^^xsd:string ;
  v-s:fileName "semantic-machines-logo-long.svg"^^xsd:string;
  v-s:filePath "/site"^^xsd:string ;
.
site:VedaLogo
  a v-s:File;
  v-s:fileUri "veda-logo.svg"^^xsd:string ;
  v-s:fileName "veda-logo.svg"^^xsd:string;
  v-s:filePath "/site"^^xsd:string ;
.

### LAYOUT ###

site:Layout
  rdf:type rdfs:Resource ;
  rdfs:label "Макет сайта"@ru ;
  rdfs:label "Site layout"@en ;
  v-ui:hasTemplate site:LayoutTemplate  ;
.

### LAYOUT TEMPLATE ####

site:LayoutTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон макета сайта"@ru ;
  rdfs:label "Site layout template"@en ;
  v-ui:template """
<script>
  document.title = "Смысловые машины";
  // Markdown
  var main = document;
  var observer = new MutationObserver(function(mutations, observer) {
    var lastMutation = mutations.pop();
    processMain(lastMutation);
  });
  var mainConfig = { childList: true, subtree: true };
  var markdownConfig = { childList: true };
  observer.observe(main, mainConfig);
  template.one("remove", function () {
    observer.disconnect();
  });
  function processMain(mutation) {
    var target = $(mutation.target);
    var markdown = target.find(".markdown:not(.observed)");
    markdown.each(function () {
      this.classList.add("observed");
      var text = this.textContent;
      this.innerHTML = marked(text, { sanitize: false, breaks: true });
      var markdownObserver = new MutationObserver(function(mutations, observer) {
        var lastMutation = mutations.pop();
        processMarkdown(lastMutation, observer);
      });
      markdownObserver.observe(this, markdownConfig);
      $(this).one("remove", function () {
        markdownObserver.disconnect();
      });
    });
  }
  function processMarkdown(mutation, observer) {
    observer.disconnect();
    var target = mutation.target;
    var text = target.textContent;
    target.innerHTML = marked(text);
    observer.observe(target, markdownConfig);
  }

//# sourceURL=site:LayoutTemplate_pre
</script>
<div class="page">
  <style>
    body { font-size:16px; line-height: 1.7em; }
    h1, h2, h3, h4, h5, h6 { font-weight: 400; }
    h1 { font-size: 2.25em; }
    h2 { font-size: 1.75em; }
    h3 { font-size: 1.50em; }
    h4 { font-size: 1.25em; }
    h5 { font-size: 1.00em; }
    h6 { font-size: 0.75em; }
    .page-header { border-bottom: 1px solid #eee; }
    .page-sheet { padding: 30px!important; }
    #main {margin: 20px 0 100px 0;}
    .nav.navbar-nav > li.active { background-color: #eee; }
    .nav.navbar-nav > li > a:hover { background-color: #f8f8f8!important; }
    em { font-style: italic!important; font-weight: normal!important; }
    .vcenter {
      display: inline-block;
      vertical-align: middle;
      float: none;
    }
    img[src*="#left"] {
      float: left;
    }
    img[src*="#right"] {
      float: right;
    }
    img[src*="#center"] {
      display: block;
      margin: auto;
    }
    img {
      max-width: 100%;
    }
  </style>
  <nav role="navigation" class="navbar navbar-veda navbar-fixed" style="background-color: #fff; border-bottom: 2px solid #ddd; margin-bottom:15px;">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="btn btn-default navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
          <span class="glyphicon glyphicon-menu-hamburger"></span>
        </button>
        <a style="width:300px;margin-top:-10px;" class="navbar-brand" href="#/site:Main" about="site:SemanticMachinesLogoLong" data-template="v-ui:ImageTemplate"></a>
        <small style="margin-top:5px;font-weight:200;" class="navbar-brand text-muted" class="pull-left" about="site:Slogan" property="rdfs:label"></small>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right" style="margin-left:15px;">
          <li about="v-ui:AvailableLanguage" data-template="v-ui:LanguageSwitchTemplate" data-switch-behavior="radio"></li>
        </ul>
        <ul class="nav navbar-nav navbar-right nav-pages" about="site:Main" rel="site:hasPage">
          <li about="@"><a about="@" href="#/@" property="rdfs:label"></a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div id="main"></div>

  <nav id="copyright" class="navbar-fixed-bottom container clearfix">
    <div class="pull-left">
      <span><span property="v-s:appBuildVersion"></span> <span property="v-s:appBuildDate"></span></span>&nbsp;
    </div>
    <div class="pull-right text-muted" about="v-s:vedaInfo">
      <a href="http://www.semantic-machines.com">
        © <span about="v-s:SemanticMachines" property="rdfs:label"></span>.
      </a>
      <span about="v-s:License" property="rdfs:label"></span>
      <a alt="GNU General Public License version 3 official text" href="http://www.gnu.org/licenses/gpl.html">
        GPLv3.
      </a>
    </div>
  </nav>
</div>
<script>
  // Mark active item
  riot.route(markActive);
  function markActive(hash) {
    var page = hash.slice(2);
    $(".nav-pages", template)
      .children()
      .removeClass("active")
      .filter("[resource='" + veda.Util.escape4$(page) + "']")
      .addClass("active");
  }
//# sourceURL=site:LayoutTemplate_post
</script>
  """ ;
.

site:PageTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон страницы"@ru ;
  rdfs:label "Page template"@en ;
  v-ui:template """
<div class="container sheet page-sheet">
  <h1 about="@" property="rdfs:label"></h1>
  <div about="@" rel="site:hasArticle"></div>
</div>
  """ ;
.

site:ArticleTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи"@ru ;
  rdfs:label "Article template"@en ;
  v-ui:template """
<article>
  <hr>
  <h2 about="@" property="site:heading"></h2>
  <p about="@" property="site:summary" class="markdown lead"></p>
  <p about="@" property="site:content" class="markdown"></p>
</article>
  """ ;
.

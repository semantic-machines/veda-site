@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix v-fs: <http://semantic-machines.com/veda/veda-search/> .
@prefix v-s: <http://semantic-machines.com/veda/veda-schema/> .
@prefix v-ui: <http://semantic-machines.com/veda/veda-ui/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix d: <http://semantic-machines.com/veda/veda-data/> .
@prefix site: <http://semantic-machines.com/veda-site/> .

<http://semantic-machines.com/veda/veda-site-layout>
  rdf:type owl:Ontology ;
  rdfs:label "Сайт Veda. Макет"@ru ;
  rdfs:label "Veda site. Layout"@en ;
#  owl:versionInfo "1.3" ;
  v-s:loadPriority 10 ;
.

### STRINGS ###

site:Slogan
  rdf:type rdfs:Resource ;
  rdfs:label "Автоматизация деловых процессов"@ru ;
  rdfs:label "Business process automation"@en ;
.

### LAYOUT ###

site:Layout
  rdf:type rdfs:Resource ;
  rdfs:label "Макет сайта"@ru ;
  rdfs:label "Site layout"@en ;
  v-ui:hasTemplate site:LayoutTemplate  ;
.

### LAYOUT TEMPLATE ####

site:LayoutTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон макета сайта"@ru ;
  rdfs:label "Site layout template"@en ;
  v-ui:template """
<script>
  // Markdown
  var target = $("#main", template).get(0);
  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(processMutation);
  });
  var config = { childList: true, subtree: true };
  observer.observe(target, config);
  template.one("remove", function () {
    observer.disconnect();
  });
  function processMutation(mutation) {
    var addedNode = $( mutation.addedNodes.item(0) );
    var toMarkup = addedNode.find(".markdown");
    toMarkup.each(function () {
      var text = this.innerText || this.textContent;
      this.innerHTML = marked(text);
    });
  }
</script>
<div class="page">
  <nav role="navigation" class="navbar navbar-default navbar-veda navbar-fixed" style="margin-bottom:0;">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="btn btn-info navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
          <span class="glyphicon glyphicon-menu-hamburger"></span>
        </button>
        <a class="navbar-brand" href="#/site:Main" class="pull-left" style="display: inline-block;"><img src="/img/veda-logo.png"></a>
        <a class="navbar-brand" href="#/site:Main" class="pull-left" about="site:Slogan" property="rdfs:label"></a>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li about="v-fs:FulltextSearch"><a href="#/@"><span class="fa fa-search"></span></a></li>
          <li id="user-info" class="hidden"></li>
          <li about="v-ui:AvailableLanguage" data-template="v-ui:LanguageSwitchTemplate"></li>
        </ul>
        <ul class="nav navbar-nav navbar-right nav-pages" about="site:Main" rel="site:hasPage">
          <li about="@"><a about="@" href="#/@" property="rdfs:label"></a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div id="main"></div>

  <nav id="copyright" class="navbar-fixed-bottom container clearfix">
    <div class="pull-left">
      <span><span property="v-s:appBuildVersion"></span> <span property="v-s:appBuildDate"></span></span>&nbsp;
    </div>
    <div class="pull-right text-muted" about="v-s:vedaInfo">
      <a href="http://www.semantic-machines.com">
        © <span about="v-s:SemanticMachines" property="rdfs:label"></span>.
      </a>
      <span about="v-s:License" property="rdfs:label"></span>
      <a alt="GNU General Public License version 3 official text" href="http://www.gnu.org/licenses/gpl.html">
        GPLv3.
      </a>
    </div>
  </nav>
</div>
<script>
  // Render user
  var userInfo = $("#user-info", template);
  var userInfoTmpl = new veda.IndividualModel("v-ui:IconPersonTemplate");
  userInfo.empty();
  veda.user.present(userInfo, userInfoTmpl);

  // Mark active item
  riot.route(markActive);
  function markActive(hash) {
    var page = hash.slice(2);
    $(".nav-pages", template).children().removeClass("active");
    $(".nav-pages", template).children("[resource='" + page + "']").addClass("active");
  }
  setTimeout(function () {
    markActive(location.hash);
  }, 100);

//# sourceURL=site:LayoutTemplate
</script>
  """ ;
.

### COMMON TEMPLATES ####

site:SliderTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон страницы продукта"@ru ;
  rdfs:label "Product page template"@en ;
  v-ui:template """
<div>
  <div id="page-slider" class="carousel slide" data-ride="carousel" data-interval="false" style="margin-top:-15px">
    <!-- Indicators -->
    <ol class="carousel-indicators" about="@" rel="site:hasPage">
      <li data-target="#page-slider" about="@" property="v-s:shortLabel"></li>
    </ol>
    <div class="carousel-inner" role="listbox" about="@" rel="site:hasPage">
      <div class="item">
        <div about="@" rel="v-s:hasImage" data-template="v-ui:ImageTemplate"></div>
        <div class="carousel-caption container-fluid" style="position: absolute; top: 0px; left: 0px; right:0px; border:none; background-color: transparent">
          <div class="container" style="border:none; background-color: transparent">
            <h1 property="rdfs:label"></h1>
            <p property="rdfs:comment"></p>
          </div>
        </div>
      </div>
    </div>
    <!-- Controls -->
    <a class="left carousel-control" href="#page-slider" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#page-slider" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  <br>
  <div id="page-container"></div>
</div>
<script>
  setTimeout(function () {

    $(".carousel-indicators > li", template).each(function (index) {
      var $this = $(this);
      $this.attr("data-slide-to", index);
      if (index === (individual.slideTo || 0) ) {
        $this.addClass("active");
      }
    });
    $(".carousel-inner > .item", template).each(function (index) {
      $(this).attr("data-index", index);
    });
    var slider = $("#page-slider", template);
    slider.on("slide.bs.carousel", showSlide);
    $("body").css({
      "overflow-y": "scroll",
      "overflow-x": "hidden"
    });
    template.one("remove", function () {
      $("body").css({
        "overflow-y": "auto",
        "overflow-x": "auto"
      });
    });
    showSlide();

    function showSlide(e) {
      var uri, aspect, slide,
          cntr = $("#page-container", template).empty().hide();
      slide = e ? $(e.relatedTarget) : $("#page-slider .item", template).eq(individual.slideTo || 0).addClass("active");
      individual.slideTo = slide.data("index");
      uri = slide.attr("resource");
      aspect = new veda.IndividualModel(uri);
      aspect.present(cntr);
      setTimeout(function () {
        if (e) {
          cntr.show( "slide", {direction: e.direction === "right" ? "left" : "right"}, 600);
        } else {
          cntr.show();
        }
      }, 100);
    }

  }, 100);
  //# sourceURL=site:SliderTemplate
</script>
  """ ;
.

site:ArticleTemplate1
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 1"@ru ;
  rdfs:label "Article template 1"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <div class="row">
      <div class="col-md-8">
        <h2>
          <span property="site:heading"></span>
          <br>
          <span property="site:summary"></span>
        </h2>
        <div class="markdown" property="site:content"></div>
      </div>
      <div class="col-md-4">
        <div rel="v-s:hasImage" data-template="v-ui:ModalImageTemplate"></div>
      </div>
    </div>
  </div>
  <br>
</div>
<script>
  //# sourceURL=site:ArticleTemplate1
</script>
  """ ;
.

site:ArticleTemplate2
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 2"@ru ;
  rdfs:label "Article template 2"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <div class="row">
      <div class="col-md-4">
        <div rel="v-s:hasImage" data-template="v-ui:ModalImageTemplate"></div>
      </div>
      <div class="col-md-8">
        <h2>
          <span property="site:heading"></span>
          <br>
          <span property="site:summary"></span>
        </h2>
        <div class="markdown" property="site:content"></div>
      </div>
    </div>
  </div>
  <br>
</div>
<script>
  //# sourceURL=site:ArticleTemplate1
</script>
  """ ;
.

site:ArticleTemplate3
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 3"@ru ;
  rdfs:label "Article template 3"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <h2>
      <span property="site:heading"></span>
      <br>
      <span property="site:summary"></span>
    </h2>
    <div class="markdown" property="site:content"></div>
    <br>
  </div>
</div>
<br>
<script>
  //# sourceURL=site:ArticleTemplate1
</script>
  """ ;
.

site:ArticleTemplate4
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 4"@ru ;
  rdfs:label "Article template 4"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <p class="lead" property="site:content"></p>
    <br>
  </div>
</div>
<br>
<script>
  //# sourceURL=site:ArticleTemplate1
</script>
  """ ;
.

site:SliderTemplate2
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон страницы продукта"@ru ;
  rdfs:label "Product page template"@en ;
  v-ui:template """
<div>
  <div id="page-slider" class="carousel slide" data-ride="carousel" data-interval="false" style="margin-top:-15px">
    <div class="carousel-inner" role="listbox" about="@" rel="site:hasPage">
      <div class="item">
        <div about="@" rel="v-s:hasImage" data-template="v-ui:ImageTemplate"></div>
        <div class="container-fluid" style="position: absolute; top: 0px; left: 0px; right:0px; border:none; background-color: transparent">
          <div class="container" style="border:none; background-color: transparent">
            <h1 style="line-height: 1; color: #ffffff; text-shadow: 0px 1px 2px black;">
              <span property="rdfs:label"></span>
              <br>
              <small style="color: #ffffff;" property="rdfs:comment"></small>
            </h1>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <div id="page-container"></div>
</div>
<script>
  setTimeout(function () {
    showSlide();

    function showSlide(e) {
      var uri, aspect, slide,
          cntr = $("#page-container", template).empty().hide();
      slide = e ? $(e.relatedTarget) : $("#page-slider .item", template).eq(individual.slideTo || 0).addClass("active");
      individual.slideTo = slide.data("index");
      uri = slide.attr("resource");
      aspect = new veda.IndividualModel(uri);
      aspect.present(cntr);
      setTimeout(function () {
        if (e) {
          cntr.show( "slide", {direction: e.direction === "right" ? "left" : "right"}, 600);
        } else {
          cntr.show();
        }
      }, 100);
    }
  }, 100);
</script>
  """ ;
.

site:ApplicationsContractorsArticle3Template
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 2"@ru ;
  rdfs:label "Article template 2"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <div class="row">
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead" property="site:tableHeaderLeft"></p>
          </div>
          <div class="panel-body bg-info">
            <p class="lead" property="site:content"></p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead" property="site:tableHeaderRight"></p>
          </div>
          <div class="panel-body bg-info">
            <p class="lead" property="site:content1"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br>
  """ ;
.

site:ApplicationsContractorsArticle4Template
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон статьи 2"@ru ;
  rdfs:label "Article template 2"@en ;
  v-ui:template """
<div class="container">
  <div class="sheet">
    <div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <p class="lead" property="site:tableHeaderLeft"></p>
        </div>
        <div class="panel-body bg-info">
        
          <div class="row">
            <div class="col-md-6">
              <p class="lead" property="site:content"></p>
            </div>
            <div class="col-md-6">
              <p class="lead" property="site:content1"></p>
            </div>
            <div class="col-md-6">
              <p class="lead" property="site:content2"></p>
            </div>
            <div class="col-md-6">
              <p class="lead" property="site:content3"></p>
            </div>
          </div>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead" property="site:tableHeaderRight"></p>
          </div>
          <div class="panel-body bg-info">
            <p class="lead" property="site:content4"></p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <p class="lead" property="site:tableHeader"></p>
          </div>
          <div class="panel-body bg-info">
            <p class="lead" property="site:content5"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br>
  """ ;
.
